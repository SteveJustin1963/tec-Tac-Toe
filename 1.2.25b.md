# matlab
```
function tictactoe()
    player_starts = true;  % Track who starts the game
    
    while true  % Main game loop for resets
        % Initialize board
        board = char('1':'9');
        game_over = false;
        
        while ~game_over
            % Display board and current starter
            display_game(board);
            if player_starts
                fprintf('Player starts this game\n\n');
            else
                fprintf('Computer starts this game\n\n');
            end
            
            % If computer starts, make its move first
            if ~player_starts
                fprintf('Computer thinking...\n');
                pause(1);
                computer_move = make_computer_move(board);
                board(computer_move) = 'O';
                display_game(board);
            end
            
            while ~game_over
                % Player move
                move = get_player_move(board);
                board(move) = 'X';
                display_game(board);
                
                % Check for player win
                if check_win(board, 'X')
                    pause(1);  % Pause to show final position
                    fprintf('\n*** YOU WIN! ***\n');
                    fprintf('\nPress any key to play again...\n');
                    pause;
                    game_over = true;
                    break;
                elseif check_draw(board)
                    pause(1);
                    fprintf('\n*** DRAW GAME! ***\n');
                    fprintf('Switching starting player for next game!\n');
                    player_starts = ~player_starts;  % Switch who starts next
                    fprintf('\nPress any key to play again...\n');
                    pause;
                    game_over = true;
                    break;
                end
                
                % Computer move
                fprintf('Computer thinking...\n');
                pause(1);
                computer_move = make_computer_move(board);
                board(computer_move) = 'O';
                display_game(board);
                
                % Check for computer win
                if check_win(board, 'O')
                    pause(1);
                    fprintf('\n*** COMPUTER WINS! ***\n');
                    fprintf('\nPress any key to play again...\n');
                    pause;
                    game_over = true;
                    break;
                elseif check_draw(board)
                    pause(1);
                    fprintf('\n*** DRAW GAME! ***\n');
                    fprintf('Switching starting player for next game!\n');
                    player_starts = ~player_starts;  % Switch who starts next
                    fprintf('\nPress any key to play again...\n');
                    pause;
                    game_over = true;
                    break;
                end
            end
        end
    end
end

function display_game(board)
    clc;
    fprintf('\n     7-Segment Tic-Tac-Toe\n\n');
    
    % For player display (first 3 seven segments)
    player_pos = board == 'X';  % Logical array of player's moves
    cpu_pos = board == 'O';     % Logical array of CPU's moves
    
    % Display top row (positions 1,2,3)
    fprintf('  ');
    for i = 1:3
        if player_pos(i)
            fprintf('-');
        else
            fprintf('x');
        end
    end
    fprintf('    ');
    % CPU's top row
    for i = 1:3
        if cpu_pos(i)
            fprintf('-');
        else
            fprintf('x');
        end
    end
    fprintf('\n');
    
    % Display middle row (positions 4,5,6)
    fprintf('  ');
    for i = 4:6
        if player_pos(i)
            fprintf('-');
        else
            fprintf('x');
        end
    end
    fprintf('    ');
    % CPU's middle row
    for i = 4:6
        if cpu_pos(i)
            fprintf('-');
        else
            fprintf('x');
        end
    end
    fprintf('\n');
    
    % Display bottom row (positions 7,8,9)
    fprintf('  ');
    for i = 7:9
        if player_pos(i)
            fprintf('-');
        else
            fprintf('x');
        end
    end
    fprintf('    ');
    % CPU's bottom row
    for i = 7:9
        if cpu_pos(i)
            fprintf('-');
        else
            fprintf('x');
        end
    end
    fprintf('\n\n');
end

function move = get_player_move(board)
    while true
        move = input('Your move (1-9): ');
        if ~isnumeric(move) || move < 1 || move > 9
            fprintf('Invalid move - please enter 1-9\n');
            continue;
        end
        if board(move) == 'X' || board(move) == 'O'
            fprintf('That position is already taken!\n');
            continue;
        end
        break;
    end
end

function move = make_computer_move(board)
    % First try to win
    move = find_winning_move(board, 'O');
    if move > 0
        return;
    end
    
    % Block player's winning move
    move = find_winning_move(board, 'X');
    if move > 0
        return;
    end
    
    % Take center if available
    if board(5) ~= 'X' && board(5) ~= 'O'
        move = 5;
        return;
    end
    
    % Take a corner with some randomness
    corners = [1 3 7 9];
    available_corners = corners(board(corners) ~= 'X' & board(corners) ~= 'O');
    if ~isempty(available_corners)
        % 80% chance to take a corner if available
        if rand < 0.8
            move = available_corners(randi(length(available_corners)));
            return;
        end
    end
    
    % Take any available spot randomly
    available = find(board ~= 'X' & board ~= 'O');
    if ~isempty(available)
        move = available(randi(length(available)));
    else
        move = -1;
    end
end

function move = find_winning_move(board, player)
    % Check all possible winning combinations
    wins = [1 2 3; 4 5 6; 7 8 9;    % Rows
            1 4 7; 2 5 8; 3 6 9;    % Columns
            1 5 9; 3 5 7];          % Diagonals
    
    move = -1;
    for i = 1:size(wins, 1)
        row = wins(i, :);
        board_row = board(row);
        % Count player's marks and empty spaces in this winning line
        player_count = sum(board_row == player);
        empty_count = sum(board_row ~= 'X' & board_row ~= 'O');
        
        % If we can win in this line
        if player_count == 2 && empty_count == 1
            % Find the empty position
            empty_pos = row(board_row ~= 'X' & board_row ~= 'O');
            move = empty_pos;
            % Add some randomness - 90% chance to take the winning move
            if rand < 0.9
                return;
            end
        end
    end
end

function won = check_win(board, player)
    wins = [1 2 3; 4 5 6; 7 8 9;    % Rows
            1 4 7; 2 5 8; 3 6 9;    % Columns
            1 5 9; 3 5 7];          % Diagonals
            
    for i = 1:size(wins, 1)
        if all(board(wins(i,:)) == player)
            won = true;
            return;
        end
    end
    won = false;
end

function draw = check_draw(board)
    draw = all(board == 'X' | board == 'O');
end
```
